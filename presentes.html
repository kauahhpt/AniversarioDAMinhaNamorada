<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Presentes - AniversÃ¡rio</title>
<link rel="icon" type="image/png" href="icon.png">
<link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;600&display=swap" rel="stylesheet">
<link href="presentes.css" rel="stylesheet">

</head>
<body>

<div class="wrap">
  <h1 class="title">Clique nos presentes ğŸ</h1>

  <div class="presentes">
    <div class="presente" onclick="abrirCarta(1)">
      <img src="presente.png" alt="Presente 1">
    </div>
    <div class="presente" onclick="abrirCarta(2)">
      <img src="presente novo.png" alt="Presente 2">
    </div>
    <div class="presente" onclick="abrirCarta(3)">
      <img src="caixa-de-presente.png" alt="Presente 3">
    </div>
  </div>
</div>

<!-- Cartinhas -->
<div id="carta1" class="cartinha">
  <button class="btn-close" onclick="fecharCarta(1)">Ã—</button>
  <h2>Cartinha 1 ğŸ’Œ</h2>
  <p data-text="Meu amor, hoje dia 8 de novembro, o dia que o universo brilhou e as estrelas sorriram com o nascimento da minha princesinha, queria tanto estar ao seu lado, mas como a distÃ¢ncia nÃ£o permite, deixo um pedacinho do meu coraÃ§Ã£o, que Ã© repleto de sentimentos por vocÃª. Abra com carinho as prÃ³ximas caixas de presente, pois dentro delas hÃ¡ muito mais do que apenas palavras... hÃ¡ sentimentos que, apesar da distÃ¢ncia, espero que alcancem seu coraÃ§Ã£o."></p>
</div>

<div id="carta2" class="cartinha">
  <button class="btn-close" onclick="fecharCarta(2)">Ã—</button>
  <h2>Cartinha 2 ğŸŒ¸</h2>
  <p data-text="Meu amor, vocÃª Ã© a estrela que o universo escolheu brilhar pra mim. VocÃª Ã© aquela presenÃ§a calma (ou Ã s vezes bem agitada kkkkk) que transforma meus dias chatos e tristes em algo especial e alegre. Foi especialmente vocÃª quem deu cor ao meu mundo cinza. Nosso momento de distÃ¢ncia pode atÃ© separar nossos corpos, mas jamais nossa alma."></p>
</div>

<div id="carta3" class="cartinha">
  <button class="btn-close" onclick="fecharCarta(3)">Ã—</button>
  <h2>Cartinha 3 ğŸ’Œ</h2>
  <p data-text="Amor, eu amo vocÃª.
Amo teu jeito leve, tua risada,
o modo como fala comigo e muda meu dia.
Amo quando me olha, mesmo sem dizer nada,
como se o mundo parasse sÃ³ pra ver a gente.

VocÃª Ã© tÃ£o lindaâ€¦
nÃ£o sÃ³ por fora, mas no jeito que sente,
no cuidado que tem,
no silÃªncio que conforta,
na paz que traz quando estÃ¡ perto.

E se eu pudesse escolher mil vezes,
mil vezes escolheria vocÃª.
Porque teu amor Ã© meu abrigo,
e teu sorriso â€”
meu motivo favorito pra existir."></p>
</div>

<a class="voltar" href="index.html">â† Voltar ao Universo</a>
<a class="proxima" href="scrollReveal.html">PrÃ³xima pÃ¡gina â†’</a>

<script>
  // Controle de cartas jÃ¡ digitadas e timeouts
  const typeWriterStatus = {
    carta1: false,
    carta2: false,
    carta3: false
  };
  const typeWriterTimeouts = {
    carta1: null,
    carta2: null,
    carta3: null
  };

  // FunÃ§Ã£o de mÃ¡quina de escrever
  function typeWriter(element, cartaId){
    // Cancela qualquer digitaÃ§Ã£o anterior
    if(typeWriterTimeouts[cartaId]){
      clearTimeout(typeWriterTimeouts[cartaId]);
      typeWriterTimeouts[cartaId] = null;
    }

    const text = element.getAttribute('data-text');
    element.textContent = "";
    let i = 0;
    const speed = 80;

    function write(){
      if(i < text.length){
        element.textContent += text.charAt(i);
        i++;
        typeWriterTimeouts[cartaId] = setTimeout(write, speed);
      } else {
        typeWriterStatus[cartaId] = true;
        typeWriterTimeouts[cartaId] = null;
      }
    }

    write();
  }

  // Abrir carta
  function abrirCarta(n){
    // Fecha todas as cartas
    [1,2,3].forEach(i => {
      const el = document.getElementById('carta'+i);
      if(el){ 
        el.classList.remove('ativa'); 
        el.setAttribute('aria-hidden', 'true'); 
      }
    });

    // Abre a carta selecionada
    const carta = document.getElementById('carta'+n);
    if(carta){ 
      carta.classList.add('ativa'); 
      carta.setAttribute('aria-hidden', 'false'); 
      typeWriter(carta.querySelector('p'), 'carta'+n);
    }
  }

  // Fechar carta
  function fecharCarta(n){
    const carta = document.getElementById('carta'+n);
    if(carta){ 
      carta.classList.remove('ativa'); 
      carta.setAttribute('aria-hidden', 'true'); 
    }
  }

  // Fechar ao clicar fora da carta
  document.addEventListener('click', (ev)=>{
    ['carta1','carta2','carta3'].forEach(id=>{
      const el = document.getElementById(id);
      if(el && el.classList.contains('ativa')){
        if(!el.contains(ev.target) && !ev.target.closest('.presente')){
          el.classList.remove('ativa');
          el.setAttribute('aria-hidden','true');
        }
      }
    });
  });
</script>
<script src="musica.js"></script>
</body>
</html>
